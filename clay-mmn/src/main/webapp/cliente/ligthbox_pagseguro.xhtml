<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" prependId="false">
		<h:head>
			<script type="text/javascript">
				function pagar(code){
				        PagSeguroLightbox(code,  {
				                 success : function(transactionCode) {
			                        /*alert('success - ' + transactionCode);*/
			                        document.getElementById("cod_transacao").value = transactionCode;
			                        document.getElementById("botao_pag_efetuado").click();
				                 },
				                 abort : function() {
			                     	document.getElementById("botao_abortar").click();
				                 }
				         }); 
			         return false;
				}
			</script>
		</h:head>
	
		<h:form prependId="false">
			<span onclick="javascript:redirect()" class="linkClass"/>
			<h:commandButton id="botao_abortar" value="Abortar" action="#{clienteMB.abortarPagamento()}" style="display:none;"/>
			<h:commandButton id="botao_pag_efetuado" value="Sucesso" action="#{clienteMB.tratarSucessoPagamento()}" style="display:none;"/>
			<h:inputHidden id="cod_transacao" value="#{clienteMB.checkoutCode}" />
		</h:form>
		<div>
			<form action="https://sandbox.pagseguro.uol.com.br/checkout/v2/cart.html?action=add" method="post" onsubmit="pagar(this); return false;">
				<input type="hidden" name="code" value="${clienteMB.checkoutCode}" />
				<input type="image" src="https://p.simg.uol.com.br/out/pagseguro/i/botoes/pagamentos/120x53-pagar-azul.gif" name="submit" alt="Pague com PagSeguro - é rápido, grátis e seguro!" />
			</form>
			<script type="text/javascript"  src="https://stc.sandbox.pagseguro.uol.com.br/pagseguro/api/v2/checkout/pagseguro.lightbox.js"></script>
		</div>
		
		
</ui:composition>
